# ==============================================================================
# TLM API Gateway - Template de Configuración de Ambientes
# ==============================================================================
# Copiar este archivo a .env y llenar con tus valores reales
# NO hacer commit de .env al control de versiones

# ==============================================================================
# Base de Datos PostgreSQL (Kong)
# ==============================================================================
# Para desarrollo local, estas variables son opcionales (se usan valores por defecto)
# Para non-prod/prod, configurar con valores de AWS RDS
POSTGRES_HOST=kong-db  # Usar 'kong-db' para local, AWS RDS host para cloud
POSTGRES_PORT=5432
POSTGRES_DB=kong
POSTGRES_USER=kong
POSTGRES_PASSWORD=kong_local_password  # Cambiar en non-prod/prod
POSTGRES_SSL=on  # off para local, on para non-prod/prod

# ==============================================================================
# Base de Datos MySQL (Konga)
# ==============================================================================
# Para desarrollo local, estas variables son opcionales (se usan valores por defecto)
# Para non-prod/prod, configurar con valores de AWS RDS/MySQL
DB_ADAPTER=mysql
DB_HOST=konga-db  # Usar 'konga-db' para local, AWS MySQL host para cloud
DB_PORT=3306
DB_DATABASE=konga
DB_USER=konga
DB_PASSWORD=konga_local_password  # Cambiar en non-prod/prod

# ==============================================================================
# Configuración de Kong
# ==============================================================================
KONG_DATABASE=postgres
KONG_PG_HOST=${POSTGRES_HOST}
KONG_PG_PORT=${POSTGRES_PORT}
KONG_PG_DATABASE=${POSTGRES_DB}
KONG_PG_USER=${POSTGRES_USER}
KONG_PG_PASSWORD=${POSTGRES_PASSWORD}
KONG_PG_SSL=on
KONG_PG_SSL_VERIFY=off

# Kong Admin API
KONG_ADMIN_LISTEN=0.0.0.0:8001
KONG_ADMIN_LISTEN_SSL=0.0.0.0:8444

# Kong Proxy
KONG_PROXY_LISTEN=0.0.0.0:8000
KONG_PROXY_LISTEN_SSL=0.0.0.0:8443

# Kong Logs
KONG_PROXY_ACCESS_LOG=/dev/stdout
KONG_ADMIN_ACCESS_LOG=/dev/stdout
KONG_PROXY_ERROR_LOG=/dev/stderr
KONG_ADMIN_ERROR_LOG=/dev/stderr

# ==============================================================================
# Configuración de Konga
# ==============================================================================
NODE_ENV=production
KONGA_LOG_LEVEL=info
KONGA_SEED_USER_DATA_SOURCE_FILE=/app/userdb.data

# ==============================================================================
# Configuración de Nginx
# ==============================================================================
NGINX_PORT=80
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# ==============================================================================
# Integración con Keycloak
# ==============================================================================
# URL del Servidor Keycloak
KEYCLOAK_URL=https://keycloak.tudominio.com
KEYCLOAK_REALM_PE=tlm-pe
KEYCLOAK_REALM_MX=tlm-mx
KEYCLOAK_REALM_CORP=tlm-corp

# ==============================================================================
# URLs de Servicios Backend
# ==============================================================================

# Servicio Gestal (Perú)
GESTAL_DEV_URL=https://gestal-dev.tudominio.com
GESTAL_QA_URL=https://gestal-qa.tudominio.com
GESTAL_PROD_URL=https://gestal-prod.tudominio.com

# Servicio Sisbon (Corporativo)
SISBON_DEV_URL=https://sisbon-dev.tudominio.com
SISBON_QA_URL=https://sisbon-qa.tudominio.com
SISBON_PROD_URL=https://sisbon-prod.tudominio.com

# ==============================================================================
# Configuración AWS (Opcional)
# ==============================================================================
AWS_REGION=us-east-1
AWS_ALB_DNS=alb-monitoreo-2113613529.us-east-1.elb.amazonaws.com

# ==============================================================================
# Monitoreo y Observabilidad (Opcional)
# ==============================================================================
# ENABLE_PROMETHEUS=true
# ENABLE_ZIPKIN=false
# ZIPKIN_URL=http://zipkin:9411/api/v2/spans

# ==============================================================================
# Seguridad
# ==============================================================================
# Configuración JWT
JWT_SECRET=your-jwt-secret-for-konga
JWT_EXPIRATION=3600

# Rate Limiting por Defecto
RATE_LIMIT_MINUTE=1000
RATE_LIMIT_HOUR=50000

# ==============================================================================
# Identificador de Ambiente
# ==============================================================================
# Valores: local, dev, qa, prod
ENVIRONMENT=local
